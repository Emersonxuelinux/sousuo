<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Solrcloud : Scripts for testing SolrCloud performance" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Solrcloud</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/yahyavi/solrcloud">View on GitHub</a>

          <h1 id="project_title">Solrcloud</h1>
          <h2 id="project_tagline">Scripts for testing SolrCloud performance</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/yahyavi/solrcloud/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/yahyavi/solrcloud/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="solrcloud" class="anchor" href="#solrcloud"><span class="octicon octicon-link"></span></a>SolrCloud</h1>

<p>Scripts for testing SolrCloud performance. </p>

<p>These are scripts and code I wrote for a short-term 5 week project on testing SolrCloud perofrmance. See report.pdf for complete description of what scripts do and how to use them, and the initial results. This was a short term study and I did not have enough time for a comprehensive study of how Solr and ZooKeepers work, so take the results and analysis in the report with a grain of salt. That said, the initial results seem stable enough to write the report. Here's a short description of repository file from the report.</p>

<p>Replace the data files in the data folder with your own. Also replace the config and schema files in the configs folder. I have a small description in the report of how I used these scripts by using symlinks to local folders for data files and symlinks to a synced configs folder (on my network profile) to deploy over several machines. </p>

<hr><h3>
<a name="table-1-table-of-scripts" class="anchor" href="#table-1-table-of-scripts"><span class="octicon octicon-link"></span></a>Table 1: Table of scripts</h3>

<table>
<thead><tr>
<th>Script Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>clean.sh</td>
<td>Cleans XML data files of non-utf and control characters that cause Post utility to crash. Currently it doesn’t enforce ASCII coding but if that's necessary, change the command in the script to the commented ASCII version.</td>
</tr>
<tr>
<td>index.sh</td>
<td>Will use Post utility on local node#1, with the XML datafile #2.</td>
</tr>
<tr>
<td>newzk.sh</td>
<td>Used to create a new local zookeeper node and to start it.</td>
</tr>
<tr>
<td>split.sh</td>
<td>Used to split a very large xml file #1 into #2 files with the same number of lines. It is mostly used for files larger than 1.5GB. The last doc inside the split file must be handled/corrected manually.</td>
</tr>
<tr>
<td>config.sh</td>
<td>The main configuration file.  Must be adjusted to reflect the parameters in your setup including different folders, number of nodes, shards, etc.</td>
</tr>
<tr>
<td>install.sh</td>
<td>Extracts (if cannot find the file, downloads it) the Solr and Zookeeper. If the download link doesn’t work replace with another server from Solr/Zookeeper page. Also generates the properties file.</td>
</tr>
<tr>
<td>oldrmnodes.sh</td>
<td>Removes local nodes.    Deprecated  by  rmremotenodes.sh.</td>
</tr>
<tr>
<td>startnodes.sh</td>
<td>Connects and to existing nodes and starts them with their current configs.</td>
</tr>
<tr>
<td>deploynodes.sh</td>
<td>Main script for testing. Kills/removes existing nodes, configs, zookeepers. Creates new zookeepers and Solr nodes and starts them up. It also asks to whether index the default data files indicated in the config file or not. The parameters are configured in config.sh.</td>
</tr>
<tr>
<td>killremotenodes.sh</td>
<td>Connects to different hosts and zookeepers and kills their process. It does not remove the nodes.</td>
</tr>
<tr>
<td>rmremotenodes.sh</td>
<td>Same as kill except it also removes the nodes.</td>
</tr>
<tr>
<td>utils.sh</td>
<td>Includes a couple of common commands used by sev- eral scripts.</td>
</tr>
<tr>
<td>genprop.sh</td>
<td>Creates a properties files to be used by the SolrJ file.</td>
</tr>
<tr>
<td>newnode.sh</td>
<td>Creates a new local node #1, also passes the rest of parameters used to the starting Solr server.  Copies the config files from config path.</td>
</tr>
<tr>
<td>smaller.sh</td>
<td>This is used for quick testing.  Creates smaller files with n lines named U-”filename” which can be used for quick deployment and testing.</td>
</tr>
<tr>
<td>zkdeploy.sh</td>
<td>Creates and starts new local zookeeper nodes according to config.sh properties.</td>
</tr>
</tbody>
</table><hr><h3>
<a name="table-2-table-of-main-folders--files" class="anchor" href="#table-2-table-of-main-folders--files"><span class="octicon octicon-link"></span></a>Table 2: Table of main folders &amp; files</h3>

<table>
<thead><tr>
<th>File/Folder Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>Solrj</td>
<td>Contains the SolrJ java sources that are designed to read and stress the servers using the q.txt queries. You can create a jar file using the build.xml file to easily deploy and run this. It creates a num threads threads as defined in the config.sh file.</td>
</tr>
<tr>
<td>data</td>
<td>Contains the main XML data files (with current de- fault name Solrn#.xml) and a queries file called q.txt. Copy your data files and query files here.</td>
</tr>
<tr>
<td>configs</td>
<td>Contains the schema and solrconfig files. Replace with your config files and schema.</td>
</tr>
<tr>
<td>zk</td>
<td>Only exists so so zookeeper id files can be created.</td>
</tr>
<tr>
<td>logs.tar.gz</td>
<td>The logs from my runs.</td>
</tr>
</tbody>
</table><p>Again please see report.pdf</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Solrcloud maintained by <a href="https://github.com/yahyavi">yahyavi</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
